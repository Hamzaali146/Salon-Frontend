<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
  />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }
    body {
      display: flex;
      min-height: 100vh;
      background-color: #f0f0f0;
    }
    .sidebar {
      width: 250px;
      background-color: #3f48cc;
      color: #fff;
      padding-top: 20px;
      position: fixed;
      height: 100%;
    }
    .sidebar h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar ul li {
      padding: 10px 20px;
      cursor: pointer;
    }
    .sidebar ul li:hover {
      background-color: #575fcf;
    }
    .sidebar ul li i {
      margin-right: 10px;
    }
    .main-content {
      margin-left: 250px;
      padding: 20px;
      /* width: calc(100% - 250px); */
    }
    .card-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .card {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 200px;
      text-align: center;
    }
    .card h3 {
      margin-bottom: 10px;
    }
    .card p {
      font-size: 24px;
      margin: 0;
    }
    .submenu {
      padding-left: 20px;
    }
    .service-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .service-buttons button {
      padding: 10px 20px;
      background-color: #3f48cc;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .service-buttons button:hover {
      background-color: #575fcf;
    }
    .contact-form {
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    border-radius: 10px;
    padding: 30px;
    width: 600px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: white;
    margin-left:420px ;
    margin-top: 100px;
    
    }

    .contact-form h2 {
        margin: 0 0 20px;
        text-align: center;
    }

    .contact-form input,
    .contact-form textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 5px;
        outline: none;
        font-size: 14px;
    }

    .contact-form input::placeholder,
    .contact-form textarea::placeholder {
        color: #999;
    }

    .contact-form button {
        width: 100%;
        padding: 10px;
        background-color: #ff4081;
        border: none;
        border-radius: 5px;
        color: white;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .contact-form button:hover {
        background-color: #e73370;
    }

    #addServices{
      height: 800px;
    }


    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 18px;
        text-align: left;
    }

    thead tr {
        background-color: #6a11cb;
        color: #ffffff;
        text-align: left;
        font-weight: bold;
    }

    th, td {
        padding: 12px 15px;
    }

    tbody tr {
        border-bottom: 1px solid #dddddd;
    }

    tbody tr:nth-of-type(even) {
        background-color: #f3f3f3;
    }

    tbody tr:last-of-type {
        border-bottom: 2px solid #009879;
    }
    .employee-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .employee-buttons button {
      padding: 10px 20px;
      background-color: #3f48cc;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .employee-buttons button:hover {
      background-color: #575fcf;
    }
    

  </style>
</head>
<body>
  <div class="sidebar">
    <h1>MSMS</h1>
    <ul>
      <li onclick="showDashboard()">
        <i class="fas fa-tachometer-alt"></i>Dashboard
      </li>
      <li onclick="showServices()">
        <i class="fas fa-concierge-bell"></i>Services
      </li>
      <li onclick="showPages()"><i class="fas fa-file-alt"></i>Pages</li>
      <li onclick="showAppointments()">
        <i class="fas fa-calendar-check"></i>Appointment
      </li>
      <li onclick="showSubscribers()">
        <i class="fas fa-users"></i>Subscriber
      </li>
      <li onclick="showAddCustomer()">
        <i class="fas fa-user-plus"></i>Add Customer
      </li>
      <li onclick="showCustomerList()">
        <i class="fas fa-list"></i>Customer List
      </li>
      <li onclick="showInvoices()">
        <i class="fas fa-file-invoice"></i>Invoices
      </li>
      <li onclick="showEmployees()"><i class="fas fa-users"></i>Employees</li>
    </ul>
  </div>
  <div class="main-content" id="main-content">
    <!-- Default content will be Dashboard -->
    <div class="card-container" id="dashboard">
      <div class="card">
        <h3>Total Customer</h3>
        <p>4</p>
      </div>
      <div class="card">
        <h3>Total Appointment</h3>
        <p>9</p>
      </div>
      <div class="card">
        <h3>Accepted Apt</h3>
        <p>5</p>
      </div>
      <div class="card">
        <h3>Rejected Apt</h3>
        <p>5</p>
      </div>
      <div class="card">
        <h3>Total Services</h3>
        <p>17</p>
      </div>
      <div class="card">
        <h3>Today Sales</h3>
        <p>0</p>
      </div>
      <div class="card">
        <h3>Yesterday Sales</h3>
        <p>0</p>
      </div>
      <div class="card">
        <h3>Last 7 Days Sales</h3>
        <p>0</p>
      </div>
      <div class="card">
        <h3>Total Sales</h3>
        <p>2650</p>
      </div>
    </div>
    <div id="services" style="display: none">
      <h2>Services</h2>
      <div class="service-buttons">
        <button onclick="showAddServices()">Add Services</button>
        <button onclick="showManageServices()">Manage Services</button>
      </div>
      <div id="addServices" style="display: none">
        <div class="contact-form">
          <h2>Add Service</h2>
          <input type="text" name="name" placeholder=" Service Name" required id="service-name">
          <input type="text" name="cost" placeholder="Cost" required id="service-cost">
          <textarea name="Description" placeholder="Description" required id="service-description"></textarea>
          <button onclick="addservice()">ADD</button>
      </div>
      </div>
      </div>
      <div id="manageServices" style="display: none;width: 1200px;" >
        <table style="width: 100%;">
          <thead >
            <tr>
                <th>Number</th>
                <th>Name</th>
                <th>Cost</th>
                <th>Action</th>
            </tr>
        </thead>

          <tbody id="serviceTableBody">
            <!-- Dynamic content will be added here -->
          </tbody>
        </table>
        
      
      </div>

      <div id="editService" style="display: none">
        <div class="contact-form">
          <h2>Edit Service</h2>
          <input type="text" name="name" required id="ser_name">
          <input type="text" name="cost" required id="ser_cost"  >
          <textarea name="Description" required id="ser_desc""></textarea>
          <input type="hidden" id="ser_id">
          <button onclick="update_service()">UPDATE</button>
        </div>
      </div>

      
    </div>
    <div id="pages" style="display: none">
      <h2>Pages</h2>
      <p>Here are all the pages...</p>
      <!-- Add your pages content here -->
    </div>
    <div id="appointments" style="display: none">
      <h2>Appointments</h2>
      <p>Here are all the appointments...</p>
      <!-- Add your appointments content here -->
    </div>
    <div id="subscribers" style="display: none">
      <h2>Subscribers</h2>
      <p>Here are all the subscribers...</p>
      <!-- Add your subscribers content here -->
    </div>
    <div id="addCustomer" style="display: none">
      <h2>Add Customer</h2>
      <p>Form to add a customer...</p>
      <!-- Add your add customer content here -->
    </div>
    <div id="customerList" style="display: none">
      <h2>Customer List</h2>
      <p>Here is the customer list...</p>
      <!-- Add your customer list content here -->
    </div>
    <div id="invoices" style="display: none">
      <h2>Invoices</h2>
      <p>Here are all the invoices...</p>
      <!-- Add your invoices content here -->
    </div>
    <div id="employees" style="display: none">
      <h2>Employees</h2>
      <div class="employee-buttons">
        <button onclick="showAddEmployee()">Add Employee</button>
        <button onclick="showManageEmployees()">Manage Employees</button>
      </div>
      <div id="addEmployee" style="display: none">
        <div class="contact-form">
          <h2>Add Employee</h2>
          <input type="text" name="name" placeholder="Employee Name" required id="employee-name">
          <input type="text" name="number" placeholder="Phone Number" required id="employee-phonenumber">
          <input type="text" name="salary" placeholder="Salary" required id="employee-salary">
          <input type="text" name="email" placeholder="Email" required id="employee-email">
          <button onclick="addEmployee()">ADD</button>
        </div>
      </div>
      <div id="manageEmployees" style="display: none;width: 1200px;">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Salary</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="employeeTableBody">
            <!-- Dynamic content will be added here -->
          </tbody>
        </table>
      </div>
      <div id="editEmployee" style="display: none">
        <div class="contact-form">
          <h2>Edit Employee</h2>
          <input type="text" name="name" required id="emp_name">
          <input type="text" name="phone" required id="emp_phone">
          <input type="text" name="salary" required id="emp_salary">
          <input type="text" name="email" required id="emp_email">
          <input type="hidden" id="emp_id">
          <button onclick="updateEmployee()">UPDATE</button>
        </div>
      </div>
    </div>
    

  </div>
  <script>
    function hideAllSections() {
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("services").style.display = "none";
      document.getElementById("pages").style.display = "none";
      document.getElementById("appointments").style.display = "none";
      document.getElementById("subscribers").style.display = "none";
      document.getElementById("addCustomer").style.display = "none";
      document.getElementById("customerList").style.display = "none";
      document.getElementById("invoices").style.display = "none";
      document.getElementById("employees").style.display="none";
    }

    function hideServiceSubsections() {
      document.getElementById("addServices").style.display = "none";
      document.getElementById("manageServices").style.display = "none";
    }

    function showDashboard() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("dashboard").style.display = "flex";
    }

    function showServices() {
      hideAllSections();
      document.getElementById("services").style.display = "block";
      showAddServices(); // Show Add Services by default when Services is clicked
    }

    function showPages() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("pages").style.display = "block";
    }

    function showAppointments() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("appointments").style.display = "block";
    }

    function showSubscribers() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("subscribers").style.display = "block";
    }

    function showAddCustomer() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("addCustomer").style.display = "block";
    }

    function showCustomerList() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("customerList").style.display = "block";
    }

    function showInvoices() {
      hideServiceSubsections();
      hideAllSections();
      document.getElementById("invoices").style.display = "block";
    }

    function showAddServices() {

      hideServiceSubsections();
      document.getElementById("addServices").style.display = "block";
    }

    function showManageServices() {
      hideServiceSubsections();
      document.getElementById("manageServices").style.display = "block";
      fetchServices();
    }
    
    function showEmployees() {
      hideAllSections();
      document.getElementById("employees").style.display = "block";
    }
    
    function showEmployees() {
    hideAllSections();
    document.getElementById("employees").style.display = "block";
    showAddEmployee(); // Show Add Employee by default when Employees is clicked
  }

    function hideEmployeeSubsections() {
      document.getElementById("addEmployee").style.display = "none";
      document.getElementById("manageEmployees").style.display = "none";
    }

    function showAddEmployee() {
      hideEmployeeSubsections();
      document.getElementById("addEmployee").style.display = "block";
    }

  function showManageEmployees() {
    hideEmployeeSubsections();
    document.getElementById("manageEmployees").style.display = "block";
    fetchEmployees();
  }


    // Show dashboard by default
    showDashboard();
  </script>

  <script>
    async function addservice() {
      const serviceName = document.getElementById('service-name').value;
      const serviceDescription = document.getElementById('service-description').value;
      const Cost = document.getElementById('service-cost').value;
      const CreationDate = '';
      const service_stat = '';

      try {
          const response = await fetch('http://localhost:3000/api/AddService', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ serviceName, serviceDescription, Cost, CreationDate,service_stat })
          });

          if (response.ok) {
              alert("SERVICE ADDED")
              // Handle success case
          } else {
            
              // Handle error case
          }
      } catch (error) {
          console.error('API error:', error);
      }
    } 

  async function deleteService(id) {
      const response = await fetch(`http://localhost:3000/api/DeleteService/${id}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
      });
      fetchServices();
}
  
  async function fetchServices() {
    document.getElementById("editService").style.display = "none";
      try {
        const response = await fetch('http://localhost:3000/api/fetchServiceNames');
        const services = await response.json();

        const tableBody = document.getElementById('serviceTableBody');
        tableBody.innerHTML = ''; // Clear existing table rows

          services.forEach((service, index) => {
          const row = document.createElement('tr');

          const cellIndex = document.createElement('td');
          cellIndex.textContent = service.ID;
          row.appendChild(cellIndex);

          const cellName = document.createElement('td');
          cellName.textContent = service.ServiceName;
          row.appendChild(cellName);

          const cellPrice = document.createElement('td');
          cellPrice.textContent = service.Cost;
          row.appendChild(cellPrice);

          

          const cellAction = document.createElement('td');
          const actionDiv = document.createElement('div');
          actionDiv.classList.add('action-buttons');

          const editIcon = document.createElement('i');
          editIcon.classList.add('fas', 'fa-edit');
          editIcon.setAttribute('title', 'Edit');
          editIcon.style.marginRight = '20px' 
          editIcon.style.cursor = 'pointer'
          editIcon.onclick = () => editService(service.ID,service.ServiceName,service.Cost,service.Description);
          
          const deleteIcon = document.createElement('i');
          deleteIcon.classList.add('fas', 'fa-trash');
          deleteIcon.setAttribute('title', 'Delete');
          deleteIcon.style.cursor = 'pointer'
          deleteIcon.onclick = () => deleteService(service.ID);
         
          actionDiv.appendChild(editIcon);
          actionDiv.appendChild(deleteIcon);

          cellAction.appendChild(actionDiv);
          row.appendChild(cellAction);

          tableBody.appendChild(row);
        });
      } catch (error) {
        
        console.error('Error fetching services:', error);
      }
    }
    
  function editService(service_id,service_name,service_cost,service_description) {
      hideServiceSubsections();
      const serviceNameElement = document.getElementById('ser_name')
      const serviceCostElement = document.getElementById('ser_cost');
      const serviceDescriptionElement = document.getElementById('ser_desc');
      const serviceIdElement = document.getElementById('ser_id');
      document.getElementById('editService').style.display = 'block';

      serviceNameElement.value = service_name;
      serviceCostElement.value = service_cost;
      serviceDescriptionElement.value = service_description;
      serviceIdElement.value = service_id;

    }

  function update_service(){
    
      const updatedService = {
        name: document.getElementById('ser_name').value,
        cost: document.getElementById('ser_cost').value,
        description: document.getElementById('ser_desc').value,
        id: document.getElementById('ser_id').value,
      };

      // Send updated service data to the server
        fetch('http://localhost:3000/api/updateService', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(updatedService)
        })
        hideServiceSubsections(); // Hide the edit form
        document.getElementById("manageServices").style.display = "block"; // Show the manage services section
        fetchServices(); // Fetch updated services
        document.getElementById("editService").style.display = "none";
        alert('Service updated successfully');
    }
    
        
    
  
    
  </script>


  </script>

  <script>
    

  async function addEmployee() {
    const employee_name = document.getElementById('employee-name').value;
    const employee_number = document.getElementById('employee-phonenumber').value;
    const employee_email = document.getElementById('employee-email').value;
    const employee_salary = document.getElementById('employee-salary').value;
    const employee_appointdate = ''; 
    const employee_status = '';

    try {
        const response = await fetch('http://localhost:3000/api/AddEmployee', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ employee_name, employee_number, employee_email, employee_salary,employee_appointdate,employee_status })
        });

        if (response.ok) {
            alert("EMPLOYEE ADDED");
            // Handle success case
        } else {
            // Handle error case
        }
    } catch (error) {
        console.error('API error:', error);
    }
  }

  async function deleteEmployee(id) {
    const response = await fetch(`http://localhost:3000/api/DeleteEmployee/${id}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
      },
    });
    fetchEmployees();
  }

  async function fetchEmployees() {
    document.getElementById("editEmployee").style.display = "none";
    try {
      const response = await fetch('http://localhost:3000/api/barbers');
      const employees = await response.json();

      const tableBody = document.getElementById('employeeTableBody');
      tableBody.innerHTML = ''; // Clear existing table rows

      employees.forEach((employee, index) => {
        const row = document.createElement('tr');

        const cellIndex = document.createElement('td');
        cellIndex.textContent = employee.ID;
        row.appendChild(cellIndex);

        const cellName = document.createElement('td');
        cellName.textContent = employee.EmpName;
        row.appendChild(cellName);

        const cellSalary = document.createElement('td');
        cellSalary.textContent = employee.Salary;
        row.appendChild(cellSalary);


        const cellAction = document.createElement('td');
        const actionDiv = document.createElement('div');
        actionDiv.classList.add('action-buttons');

        const editIcon = document.createElement('i');
        editIcon.classList.add('fas', 'fa-edit');
        editIcon.setAttribute('title', 'Edit');
        editIcon.style.marginRight = '20px';
        editIcon.style.cursor = 'pointer';
        editIcon.onclick = () => editEmployee(employee.ID, employee.EmpName,employee.EmpNumber, employee.EmpEmail,employee.Salary);

        const deleteIcon = document.createElement('i');
        deleteIcon.classList.add('fas', 'fa-trash');
        deleteIcon.setAttribute('title', 'Delete');
        deleteIcon.style.cursor = 'pointer';
        deleteIcon.onclick = () => deleteEmployee(employee.ID);

        actionDiv.appendChild(editIcon);
        actionDiv.appendChild(deleteIcon);

        cellAction.appendChild(actionDiv);
        row.appendChild(cellAction);

        tableBody.appendChild(row);
        
      });
    } catch (error) {
      console.error('Error fetching employees:', error);
    }
  }

  function editEmployee(emp_id, emp_name,emp_phone, emp_email, emp_salary) {
    hideEmployeeSubsections();    
    const empNameElement = document.getElementById('emp_name');
    const empPhoneNumberElement = document.getElementById('emp_phone');
    const empSalaryElement = document.getElementById('emp_salary');
    const empIdElement = document.getElementById('emp_id');
    const empEmailElement = document.getElementById('emp_email');
    document.getElementById('editEmployee').style.display = 'block';

    empNameElement.value = emp_name;
    empPhoneNumberElement.value = emp_phone;
    empSalaryElement.value = emp_salary;
    empIdElement.value = emp_id;
    empEmailElement.value = emp_email

  }

  async function updateEmployee() {

    const updatedEmployee = {
      name: document.getElementById('emp_name').value,
      phone: document.getElementById('emp_phone').value,
      salary: document.getElementById('emp_salary').value,
      email: document.getElementById('emp_email').value,
      id: document.getElementById('emp_id').value,
    };

    try {
      await fetch('http://localhost:3000/api/updateEmployee', {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(updatedEmployee),
      });
      hideEmployeeSubsections(); // Hide the edit form
      document.getElementById("manageEmployees").style.display = "block"; // Show the manage employees section
      fetchEmployees(); // Fetch updated employees
      document.getElementById("editEmployee").style.display = "none";
      alert('Employee updated successfully');
    } catch (error) {
      console.error('Error updating employee:', error);
    }
  }

  </script>
</body>
</html>